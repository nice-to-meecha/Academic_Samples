<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TaskManager.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">HW09</a> &gt; <a href="index.source.html" class="el_package">problem01.controller</a> &gt; <span class="el_source">TaskManager.java</span></div><h1>TaskManager.java</h1><pre class="source lang-java linenums">package problem01.controller;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Objects;
import problem01.Task;
import problem01.view.DisplayTable;
import problem01.view.InvalidArgumentException;

/**
 * Acts as an invoker class in the Command design pattern. Stores a list of all tasks to be performed,
 * as well as methods for creating and performing these tasks.
 */
public class TaskManager implements ITaskManager {

<span class="fc" id="L17">  private static final Integer STARTING_ID = 0;</span>
<span class="fc" id="L18">  private static final Integer MAX_NUM_TASK = 1;</span>


  private List&lt;Task&gt; taskList;
  private List&lt;Todo&gt; todoList;
  Integer id;

  /**
   * Constructor for the class
   *
   * @param todoList - list of Todo items to be managed by the task Manager
   */
<span class="fc" id="L30">  public TaskManager(List&lt;Todo&gt; todoList) {</span>
<span class="fc" id="L31">    this.todoList = todoList;</span>
<span class="fc" id="L32">    this.taskList = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L33">    this.id = STARTING_ID;</span>
<span class="fc" id="L34">  }</span>

  /**
   * Generates unique IDs. Scans the list of Todos for the highest ID, begins creating new IDs
   * higher than that number.
   *
   * @return - unique ID number
   */
  private Integer generateID() {
<span class="fc bfc" id="L43" title="All 2 branches covered.">    for (Todo todo : this.todoList) {</span>
<span class="fc bfc" id="L44" title="All 2 branches covered.">      if (todo.getId() &gt; this.id) {</span>
<span class="fc" id="L45">        this.id = todo.getId();</span>
      }
<span class="fc" id="L47">    }</span>
<span class="fc" id="L48">    this.id++;</span>
<span class="fc" id="L49">    return this.id;</span>
  }

  /**
   * Adds a task to the task list
   * @param task - task to be added
   */
  @Override
  public void addTask(Task task) {
<span class="fc" id="L58">    this.taskList.add(task);</span>
<span class="fc" id="L59">  }</span>

  /**
   * Performs argument validation on all the tasks in the task list
   * @throws InvalidArgumentException - thrown if arguments are found to be invalid
   */
  @Override
  public void validateArgsAllTasks() throws InvalidArgumentException {
<span class="fc" id="L67">    this.validateTaskList();</span>
<span class="fc bfc" id="L68" title="All 2 branches covered.">    for (Task task : this.taskList) {</span>
<span class="fc" id="L69">      task.validateArgs(this.todoList);</span>
<span class="fc" id="L70">    }</span>
<span class="fc" id="L71">  }</span>

  /**
   * Validates the taskList to ensure the limit to the number of tasks that can be performed is not
   * exceeded. Also moves displayTable objects to the back of the list, so that they are processed
   * last.
   *
   * @throws InvalidArgumentException - thrown if arguments are found to be invalid
   */
  private void validateTaskList() throws InvalidArgumentException {
<span class="fc" id="L81">    int addCount = 0;</span>
<span class="fc" id="L82">    int displayCount = 0;</span>
<span class="fc bfc" id="L83" title="All 2 branches covered.">    for (int i = 0; i &lt; this.taskList.size(); i++) {</span>
<span class="fc bfc" id="L84" title="All 2 branches covered.">      if (this.taskList.get(i) instanceof AddTodo) {</span>
<span class="fc" id="L85">        addCount++;</span>
      }
<span class="fc bfc" id="L87" title="All 2 branches covered.">      if (this.taskList.get(i) instanceof DisplayTable) {</span>
<span class="fc" id="L88">        this.taskList.add(this.taskList.get(i));</span>
<span class="fc" id="L89">        this.taskList.remove(i);</span>
<span class="fc" id="L90">        displayCount++;</span>
      }
    }
<span class="pc bpc" id="L93" title="1 of 4 branches missed.">    if (displayCount &gt; MAX_NUM_TASK || addCount &gt; MAX_NUM_TASK) {</span>
<span class="fc" id="L94">      throw new InvalidArgumentException(&quot;Limits of tasks that can be performed:\n&quot;</span>
          + &quot;--add-todo: 1\n--display: 1\n--complete-todo: no limit&quot;);
    }
<span class="fc" id="L97">  }</span>

  /**
   * Performs all the tasks in the task list
   */
  public void performAllTasks() {
<span class="fc bfc" id="L103" title="All 2 branches covered.">    for (Task task : this.taskList) {</span>
<span class="fc" id="L104">      this.todoList = task.performTask(this.todoList);</span>
<span class="fc" id="L105">    }</span>
<span class="fc" id="L106">    this.taskList.clear();</span>
<span class="fc" id="L107">  }</span>

  /**
   * Creates a new AddTodo task. Takes in relevant arguments and uses the information to set the
   * appropriate fields of an AddTodo object using setters. Adds To-do object to the taskList.
   *
   * @param args - relevant command line arguments for creating this task
   * @throws InvalidArgumentException - thrown if arguments are found to be invalid
   */
  public void createAddTodo(HashMap &lt;String, String&gt; args) throws InvalidArgumentException {
<span class="fc" id="L117">    AddTodo addTodo = new AddTodo(this.generateID());</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.TODO_TEXT)) {</span>
<span class="fc" id="L119">      addTodo.setTodoText(args.get(ArgConstants.TODO_TEXT));</span>
    }
<span class="fc bfc" id="L121" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.COMPLETED)) {</span>
<span class="fc" id="L122">      addTodo.setCompleted(Boolean.parseBoolean(args.get(ArgConstants.COMPLETED)));</span>
    }
    try {
<span class="fc bfc" id="L125" title="All 2 branches covered.">      if (args.containsKey(ArgConstants.PRIORITY)) {</span>
<span class="fc" id="L126">        addTodo.setPriority(Integer.valueOf(args.get(ArgConstants.PRIORITY)));</span>
      }
<span class="fc" id="L128">    } catch (NumberFormatException e) {</span>
<span class="fc" id="L129">      throw new InvalidArgumentException(&quot;--priority must be followed by 1, 2, or 3&quot;);</span>
<span class="fc" id="L130">    }</span>
<span class="fc bfc" id="L131" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.CATEGORY)) {</span>
<span class="fc" id="L132">      addTodo.setCategory(args.get(ArgConstants.CATEGORY));</span>
    }
<span class="fc bfc" id="L134" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.DUE)) {</span>
<span class="fc" id="L135">      addTodo.setDueDate(args.get(ArgConstants.DUE));</span>
    }
<span class="fc" id="L137">    this.addTask(addTodo);</span>
<span class="fc" id="L138">  }</span>

  /**
   * Creates a new CompleteTodo task. Takes in relevant arguments and uses the information to set the
   * appropriate fields of an CompleteTodo object using setters. Adds To-do object to the taskList.
   *
   * @param id - id of the to-do
   * @throws InvalidArgumentException - thrown if arguments are found to be invalid
   */
  public void createCompleteTodo(String id) throws InvalidArgumentException {
    try {
<span class="fc" id="L149">      CompleteTodo completeTodo = new CompleteTodo(Integer.valueOf(id));</span>
<span class="fc" id="L150">      this.addTask(completeTodo);</span>
<span class="fc" id="L151">    } catch (NumberFormatException e) {</span>
<span class="fc" id="L152">      throw new InvalidArgumentException(&quot;--complete-todo must be followed by an id number&quot;);</span>
<span class="fc" id="L153">    }</span>
<span class="fc" id="L154">  }</span>

  /**
   * Creates a new DisplayTable task. Takes in relevant arguments and uses the information to set the
   * appropriate fields of an DisplayTable object using setters. Adds To-do object to the taskList.
   *
   * @param args - relevant command line arguments for creating this task
   */
  public void createDisplayTable(HashMap&lt;String, String&gt; args) {
<span class="fc" id="L163">    DisplayTable displayTable = new DisplayTable();</span>
<span class="fc bfc" id="L164" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.SHOW_INCOMPLETE)) {</span>
<span class="fc" id="L165">      displayTable.setShowIncomplete(Boolean.parseBoolean(args.get(ArgConstants.SHOW_INCOMPLETE)));</span>
    }
<span class="fc bfc" id="L167" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.SHOW_CATEGORY)) {</span>
<span class="fc" id="L168">      displayTable.setShowCategory(args.get(ArgConstants.SHOW_CATEGORY));</span>
    }
<span class="fc bfc" id="L170" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.SORT_BY_DATE)) {</span>
<span class="fc" id="L171">      displayTable.setSortByDate(Boolean.parseBoolean(args.get(ArgConstants.SORT_BY_DATE)));</span>
    }
<span class="fc bfc" id="L173" title="All 2 branches covered.">    if (args.containsKey(ArgConstants.SORT_BY_PRIORITY)) {</span>
<span class="fc" id="L174">      displayTable.setSortByPriority(Boolean.parseBoolean(args.get(ArgConstants.SORT_BY_PRIORITY)));</span>
    }
<span class="fc" id="L176">    this.addTask(displayTable);</span>
<span class="fc" id="L177">  }</span>

  /**
   * Returns the task list
   * @return - the task list field
   */
  public List&lt;Task&gt; getTaskList() {
<span class="fc" id="L184">    return this.taskList;</span>
  }

  /**
   * Returns the ID
   * @return the ID field
   */
  public Integer getId() {
<span class="fc" id="L192">    return this.id;</span>
  }

  /**
   * Returns the todo list field
   *
   * @return the todo list
   */
  public List&lt;Todo&gt; getTodoList() {
<span class="fc" id="L201">    return this.todoList;</span>
  }

  /**
   * Sets the ID field. Should only be used for testing purposes
   *
   * @param id - ID field
   */
  public void setId(Integer id) {
<span class="fc" id="L210">    this.id = id;</span>
<span class="fc" id="L211">  }</span>

  /**
   * Overrides the default equals() method to compare param object to this object
   *
   * @param o- object for comparison
   * @return - whether the objects are equal or not
   */
  @Override
  public boolean equals(Object o) {
<span class="fc bfc" id="L221" title="All 2 branches covered.">    if (this == o) {</span>
<span class="fc" id="L222">      return true;</span>
    }
<span class="fc bfc" id="L224" title="All 4 branches covered.">    if (o == null || this.getClass() != o.getClass()) {</span>
<span class="fc" id="L225">      return false;</span>
    }
<span class="fc" id="L227">    TaskManager that = (TaskManager) o;</span>
<span class="fc bfc" id="L228" title="All 2 branches covered.">    return Objects.equals(this.taskList, that.taskList) &amp;&amp;</span>
<span class="fc bfc" id="L229" title="All 2 branches covered.">        Objects.equals(this.todoList, that.todoList);</span>
  }

  /**
   * Overrides the default hashCode() method, returns the hashcode of the object
   *
   * @return - hashcode of the object
   */
  @Override
  public int hashCode() {
<span class="fc" id="L239">    return Objects.hash(this.taskList, this.todoList);</span>
  }

  /**
   * Overrides the default toString() method, returns a string representation of the object
   *
   * @return - string representation of object
   */
  @Override
  public String toString() {
<span class="fc" id="L249">    return &quot;TaskManager{&quot; +</span>
        &quot;taskList=&quot; + this.taskList +
        &quot;, todoList=&quot; + this.todoList +
        &quot;, ID=&quot; + this.id +
        '}';
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.4.201905082037</span></div></body></html>